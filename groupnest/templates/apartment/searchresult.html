{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Search{% endblock %}</h1>
{% endblock %}

{% block content %}

  <script type=text/javascript>
    $(function() {
      $('a#search').bind('click', function() {
        $.getJSON($SCRIPT_ROOT + '/apartment/search', {
          zipcode: $('input[name="zipcode"]').val(),
        }, function(data) {
          $("#result").html('');
          $.each(data, function(index, apartment) {
            $('#result').append('<header><div><h2>Apartment ID: ' + apartment.apartment_id + '</h2></div></header>' 
            + '<p class="body">treet_address: '+ apartment.street_address 
            + ', zipcode: '+ apartment.zip + '</p>');
				  });
        });
        return false;
      });
    });
  </script>

  <p><input type=text size=5 name=zipcode>  <a href=# id=search> search by zipcode</a><p></p>
    <span><span id=result>
    </span></span>
    
    <!-- {% for apartment in result %} -->
     <!-- <article class="apartment"> -->
       <!-- <header> -->
         <div>
           <h1>apartment id: {{ apartment['apartment_id'] }}</h1>
           <!-- <div class="about"> {{ apartment['street_address'] }} listed on {{ apartment['created'].strftime('%Y-%m-%d') }}</div> -->
         </div>
         <!-- {% if g.user['id'] == post['author_id'] %}
           <a class="action" href="{{ url_for('blog.update', id=post['id']) }}">Edit</a>
         {% endif %} -->
       <!-- </header> -->
       <p class="body">{{ apartment['sqft'] }}</p>
     <!-- </article> -->
     <!-- {% if not loop.last %}
       <hr>
     {% endif %}
    
   {% endfor %}  -->
{% endblock %}
</section>